---
import PageLayout from '../layouts/PageLayout.astro';
import Container from '../components/ui/Container.astro';
import Button from '../components/ui/Button.astro';
import Card from '../components/ui/Card.astro';
import SectionHeading from '../components/ui/SectionHeading.astro';
import ServiceSchema from '../components/seo/ServiceSchema.astro';
import FAQSchema from '../components/seo/FAQSchema.astro';
import BreadcrumbSchema from '../components/seo/BreadcrumbSchema.astro';
import { pageSEO } from '../utils/seo';

const seo = pageSEO.entretien;

const plans = [
  {
    name: 'Essentiel',
    price: '120',
    frequency: '/mois',
    description: 'L\'entretien de base pour maintenir votre piscine en bon √©tat toute l\'ann√©e.',
    features: [
      'Visite mensuelle',
      'Analyse de l\'eau',
      'Ajustement pH et chlore',
      'Nettoyage du skimmer',
      'Contr√¥le de la filtration',
      'Rapport d\'intervention',
    ],
    excluded: [
      'Nettoyage complet du bassin',
      'Hivernage / remise en route',
      'Intervention d\'urgence',
      'Pi√®ces d√©tach√©es incluses',
    ],
    popular: false,
    cta: 'Choisir Essentiel',
  },
  {
    name: 'Confort',
    price: '220',
    frequency: '/mois',
    description: 'La formule id√©ale pour une piscine toujours impeccable sans effort.',
    features: [
      'Visite bimensuelle',
      'Analyse compl√®te de l\'eau',
      'Ajustement pH, chlore et TAC',
      'Nettoyage complet du bassin',
      'Nettoyage de la ligne d\'eau',
      'Contr√¥le complet des √©quipements',
      'Hivernage inclus',
      'Remise en route au printemps',
      'Rapport d\'intervention d√©taill√©',
    ],
    excluded: [
      'Intervention d\'urgence prioritaire',
      'Pi√®ces d√©tach√©es incluses',
    ],
    popular: true,
    cta: 'Choisir Confort',
  },
  {
    name: 'Premium',
    price: '380',
    frequency: '/mois',
    description: 'Le service tout compris pour une tranquillit√© totale, 365 jours par an.',
    features: [
      'Visite hebdomadaire',
      'Analyse compl√®te de l\'eau',
      'Traitement complet de l\'eau',
      'Nettoyage int√©gral du bassin',
      'Nettoyage de la ligne d\'eau',
      'Contr√¥le et maintenance des √©quipements',
      'Hivernage complet inclus',
      'Remise en route au printemps',
      'Intervention d\'urgence prioritaire (48h)',
      'Pi√®ces d\'usure incluses',
      'Produits de traitement inclus',
      'Interlocuteur d√©di√©',
    ],
    excluded: [],
    popular: false,
    cta: 'Choisir Premium',
  },
];

const additionalServices = [
  { title: 'Hivernage', desc: 'Mise en hivernage compl√®te de votre piscine avant l\'hiver. B√¢chage, traitement choc, protection des √©quipements.', price: 'D√®s 350 CHF' },
  { title: 'Remise en Route', desc: 'Remise en service de votre piscine au printemps. Nettoyage, analyse, traitement et v√©rification de tous les √©quipements.', price: 'D√®s 300 CHF' },
  { title: 'Traitement Choc', desc: 'Traitement d\'urgence pour eau verte, trouble ou probl√®me de qualit√©. Intervention rapide et efficace.', price: 'D√®s 180 CHF' },
  { title: 'D√©tartrage Filtre', desc: 'Nettoyage en profondeur et d√©tartrage de votre filtre √† sable ou √† cartouche pour une filtration optimale.', price: 'D√®s 150 CHF' },
];

const faqItems = [
  { question: 'Puis-je changer de formule en cours d\'ann√©e ?', answer: 'Oui, vous pouvez passer √† une formule sup√©rieure √† tout moment. Le passage √† une formule inf√©rieure est possible √† chaque date anniversaire de votre contrat, avec un pr√©avis d\'un mois.' },
  { question: 'Quelle est la dur√©e d\'engagement ?', answer: 'Nos contrats sont annuels avec tacite reconduction. Vous pouvez r√©silier avec un pr√©avis de 2 mois avant la date anniversaire. Aucun frais de r√©siliation n\'est appliqu√©.' },
  { question: 'Intervenez-vous en urgence le week-end ?', answer: 'Avec la formule Premium, nous garantissons une intervention sous 48h, y compris le week-end en saison. Pour les autres formules, les interventions d\'urgence sont factur√©es au tarif horaire en vigueur.' },
  { question: 'Les produits chimiques sont-ils inclus ?', answer: 'Les produits de traitement sont inclus uniquement dans la formule Premium. Pour les formules Essentiel et Confort, les produits sont factur√©s en suppl√©ment au tarif pr√©f√©rentiel de nos clients sous contrat.' },
];
---
<PageLayout
  title={`${seo.title} | Astro Piscines`}
  description={seo.description}
  heroTitle="Entretien de Piscines"
  heroSubtitle="Des formules d'entretien adapt√©es √† vos besoins pour profiter de votre piscine en toute s√©r√©nit√©, toute l'ann√©e."
>
  <ServiceSchema
    slot="schema"
    name="Entretien de Piscines"
    description={seo.description}
    url="/entretien/"
  />
  <BreadcrumbSchema slot="schema" />
  <FAQSchema slot="schema" items={faqItems} />

  <!-- Pourquoi un contrat -->
  <section class="py-20">
    <Container>
      <SectionHeading
        title="Pourquoi un Contrat d'Entretien ?"
        subtitle="Un entretien r√©gulier prolonge la dur√©e de vie de votre piscine et garantit une eau saine en permanence."
      />
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {[
          { icon: 'üõ°Ô∏è', title: 'Protection', desc: 'Pr√©venez les pannes co√ªteuses et les d√©gradations. Un entretien r√©gulier √©vite les r√©parations d\'urgence.' },
          { icon: 'üíß', title: 'Eau Parfaite', desc: 'Une eau toujours limpide et √©quilibr√©e, sans risque pour la sant√©. Baignade en toute confiance.' },
          { icon: 'üí∞', title: '√âconomies', desc: 'R√©duisez votre consommation d\'eau, d\'√©nergie et de produits chimiques gr√¢ce √† un suivi professionnel.' },
        ].map((item) => (
          <div class="text-center">
            <div class="text-4xl mb-4">{item.icon}</div>
            <h3 class="text-xl font-heading font-bold text-pool-deep mb-2">{item.title}</h3>
            <p class="text-gray-600">{item.desc}</p>
          </div>
        ))}
      </div>
    </Container>
  </section>

  <!-- Pricing Table -->
  <section class="py-20 bg-pool-surface">
    <Container>
      <SectionHeading
        title="Nos Forfaits d'Entretien"
        subtitle="Choisissez la formule adapt√©e √† vos besoins. Tous les prix sont en CHF, TVA incluse."
      />
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-stretch">
        {plans.map((plan) => (
          <div class:list={[
            'bg-white rounded-2xl shadow-md transition-all duration-300 hover:-translate-y-1 hover:shadow-xl relative flex flex-col',
            { 'ring-2 ring-gold scale-105 z-10': plan.popular },
          ]}>
            {plan.popular && (
              <div class="absolute -top-4 left-1/2 -translate-x-1/2 bg-gold text-charcoal text-sm font-heading font-bold px-6 py-1 rounded-full">
                Le plus populaire
              </div>
            )}
            <div class="p-8 text-center border-b border-gray-100">
              <h3 class="text-2xl font-heading font-bold text-pool-deep mb-2">{plan.name}</h3>
              <p class="text-gray-500 text-sm mb-6">{plan.description}</p>
              <div class="flex items-baseline justify-center">
                <span class="text-5xl font-heading font-bold text-pool-deep">{plan.price}</span>
                <span class="text-lg text-gray-500 ml-1">CHF{plan.frequency}</span>
              </div>
            </div>
            <div class="p-8 flex-1 flex flex-col">
              <ul class="space-y-3 flex-1">
                {plan.features.map((feature) => (
                  <li class="flex items-start text-sm">
                    <svg class="w-5 h-5 text-gold mr-2 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-700">{feature}</span>
                  </li>
                ))}
                {plan.excluded.map((feature) => (
                  <li class="flex items-start text-sm">
                    <svg class="w-5 h-5 text-gray-300 mr-2 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-gray-400">{feature}</span>
                  </li>
                ))}
              </ul>
              <div class="mt-8">
                <Button
                  href="/contact/"
                  variant={plan.popular ? 'primary' : 'ghost'}
                  size="lg"
                  class="w-full justify-center"
                >
                  {plan.cta}
                </Button>
              </div>
            </div>
          </div>
        ))}
      </div>
      <p class="text-center text-gray-500 text-sm mt-8">
        Tarifs indicatifs pour une piscine de taille standard (8x4m). Devis personnalis√© sur demande.
      </p>
    </Container>
  </section>

  <!-- Services Ponctuels -->
  <section class="py-20">
    <Container>
      <SectionHeading
        title="Services Ponctuels"
        subtitle="En compl√©ment ou sans contrat, nous intervenons pour des prestations √† la demande."
      />
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {additionalServices.map((service) => (
          <Card class="p-6">
            <h3 class="text-lg font-heading font-bold text-pool-deep mb-2">{service.title}</h3>
            <p class="text-gray-600 text-sm mb-4">{service.desc}</p>
            <p class="font-heading font-bold text-gold">{service.price}</p>
          </Card>
        ))}
      </div>
    </Container>
  </section>

  <!-- FAQ -->
  <section class="py-20 bg-gray-50">
    <Container>
      <SectionHeading
        title="Questions Fr√©quentes"
        subtitle="Tout savoir sur nos contrats d'entretien."
      />
      <div class="max-w-3xl mx-auto space-y-6">
        {faqItems.map((item) => (
          <Card class="p-6" hover={false}>
            <h3 class="text-lg font-heading font-bold text-pool-deep mb-2">{item.question}</h3>
            <p class="text-gray-600">{item.answer}</p>
          </Card>
        ))}
      </div>
    </Container>
  </section>

  <!-- CTA -->
  <section class="py-20 bg-gradient-to-br from-pool-deep to-pool-medium">
    <Container>
      <div class="text-center">
        <h2 class="text-3xl md:text-4xl font-heading font-bold text-white mb-4">
          Profitez de votre piscine sans contrainte
        </h2>
        <p class="text-pool-surface text-lg mb-8 max-w-2xl mx-auto">
          Confiez l'entretien de votre piscine √† nos experts et profitez simplement de la baignade.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button href="/contact/" variant="primary" size="lg">Demander un devis</Button>
          <Button href="/configurateur/" variant="ghost" size="lg" class="border-white text-white hover:bg-white hover:text-pool-deep">Configurateur en ligne</Button>
        </div>
      </div>
    </Container>
  </section>
</PageLayout>
